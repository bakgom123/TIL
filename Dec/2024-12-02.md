## 날짜: 2024-12-02

### 스크럼
- 학습 목표 : 네트워크 마무리

### 새로 배운 내용
#### APIPA

- APIPA는 169.254.00부터 169.254.255.255까지의 IP주소를 사용한다
- 네트워크에 DHCP 서버가 없거나 접근이 어려우면 자동으로 IP주소를 생성해서 사용한다 → 이게 APIPA이다
- 하지만 기기는 로컬 네트워크 내에서만 통신이 가능하기에 인터넷 등 외부 네트워크에는 연결이 안됨
- DHCP 서버가 복구되면 다시 요청을 보냄, APIPA는 임시 주소다

#### 네트워크의 클래스

- A클래스
    - 대규모 네트워크
    - 8비트가 네트워크 주소, 나머지가 호스트 주소
    - 0.0.0 ~ 127.255.255.255
- B클래스
    - 중규모 네트워크
    - 16비트가 네트워크 주소, 나머지가 호스트 주소
    - 128.0.0 ~ 191.255.255.255
- C클래스
    - 소규모 네트워크
    - 24비트가 네트워크 주소, 나머지가 호스트 주소
    - 192.0.0 ~ 233.255.255.255

#### 서브넷

- 네트워크 내부의 작은 네트워크
- 클래스 C를 기준으로 IP 분배하는 예시
    - 254대의 컴퓨터가 접속 가능한데 실제 접속하는 기기가 20대면? 234개의 IP가 낭비
    - 4분할
        - 192.168.1.64~192.168.1.127 → 서브넷 2
        - 192.168.1.128~192.168.1.191 → 서브넷 3
        - 192.168.1.192~192.168.1.255 → 서브넷 4
    - 8비트의 호스트 주소에서 2비트를 네트워크 주소로 가져갈 때, 이 2비트는 다음과 같은 4가지 조합이 가능
        - 00, 01, 10, 11
    - 예를 들어 192.168.1.0/24 네트워크를 2비트로 서브넷팅하면:
        1. 192.168.1.0 (00000000) - 첫 번째 서브넷
        2. 192.168.1.64 (01000000) - 두 번째 서브넷
        3. 192.168.1.128 (10000000) - 세 번째 서브넷
        4. 192.168.1.192 (11000000) - 네 번째 서브넷

#### CIDR

- IP주소를 효율적으로 할당하고 라우팅하기 위한 방식
- 필요한 만큼 할당
- 2진수 8자리 4블럭 → 외워 그냥

#### Global IP

- 인터넷을 통해 외부와 통신하는 고유한 IP

#### Private IP

- 내부 네트워크 내 통신용 IP

#### 게이트웨이

- 네트워크 간 연결
- 라우팅 → 경로 지정
- 데이터 변환
- 공유기가 게이트웨이라고 생각하면 편함
- 게이트웨이의 종류
    - 기본 게이트웨이: 내부 네트워크에서 인터넷으로 나가기 위해 사용하는 라우터
    - 네트워크 게이트웨이
        - 다른 네트워크 간 데이터를 전달함
        - 회사의 사내 네트워크와 인터넷을 연결하는 라우터
    - 프로토콜 게이트웨이
        - 서로 다른 프로토콜 간 데이터를 변환해줌

#### 라우팅 테이블

- 데이터 패킷을 어디로 보낼지 결정하는 데이터베이스
- 동작 방식
    - 목적지 확인
    - 라우팅 테이블에서 가장 적합한 경로를 찾음
    - 선택한 경로로 데이터 패킷을 전달
- 구성 요소
    - 목적지 네트워크
    - 서브넷 마스크
    - 게이트웨이
    - 네트워크 인터페이스
    - 메트릭

#### 라우팅, 라우터, 게이트웨이

- 라우팅: 데이터가 네트워크에서 목적지까지 전달되기 위해 경로를 결정하는 과정
- 게이트웨이: 네트워크 간 출입구 역할을 하는 장치 또는 성정
- 라우터: 라우팅을 수행하는 장치

#### NAT

- 네트워크 주소 변환
- **내부 네트워크에서 외부로의 통신**: 내부 장치가 인터넷에 접속할 때, NAT 라우터는 출발지 IP 주소를 사설 IP에서 공인 IP로 변환합니다.
- **외부 네트워크에서 내부로의 통신**: 응답 패킷이 돌아올 때, NAT 라우터는 목적지 IP 주소를 공인 IP에서 해당 사설 IP로 변환합니다.

#### 로드밸런서

- 서버에 걸리는 부하를 여러 서버에 균등하게 분배
- 역할
    - 트래픽 분배
    - 장애 허용
        - 특정 서버에 장애가 발생하면 해당 서버를 제외하고 다른 서버로 요청을 보내어 서비스 중단을 방지
    - 확장성 지원
        - 서버 수를 늘려도 로드밸런서가 자동으로 새 서버를 트래픽 분배에 포함시킴
    - 성능 최적화
        - 각 서버를 주기적으로 health check하여 과부하 상태에 있는 서버로 요청을 보내지 않음
- 작동 방식
    - Round Robin
    - Least Connections
    - Weighted
- 종류
    - 하드웨어 로드밸런서
        - Citrix ADC 같은 회사에서 솔루션 형태로 제공
    - 소프트웨어 로드밸런서
        - Nginx, AWS ELB등

#### 리버스 프록시

- 서버 앞단에서 클라이언트의 요청을 받아 적절한 백엔드 서버로 전달하는 중계 서버
- 동작 방식
    - 클라이언트가 리버스 프록시를 백엔드 서버라고 생각하고 요청을 보냄
    - 리버스 프록시는 요청을 수신하고 백엔드에 전달
    - 백엔드 서버의 응답을 다시 클라이언트에게 전달
- 목적
    - 로드밸런싱
    - 보안 강화
    - 캐싱 → 자주 요청되는 데이터는 리버스 프록시에 저장해서 백엔드 서버의 부하를 줄임
    - SSL Termination → HTTPS 트래픽의 암호화를 해제하고 백엔드 서버로는 HTTP로 전달해서 서버 부담을 줄임
    - Single Entry Point → 단일 URL을 통해 여러 서비스에 접근할 수 있음
- 리버스 프록시를 구현한 서비스들
    - Nginx
    - Apache HTTP Sever
    - HAProxy
    - AWS Application Load Balancer

#### CDN

- 전 세계에 분산된 서버 네트워크를 통해 웹 콘텐츠를 유저에게 더 빠르고 효율적으로 전달하는 시스템
- 정적 콘텐츠를 캐싱해서 유저가 가까운 서버에서 데이터를 받음
- 동적 콘텐츠 캐싱도 가능하지만 요청 경로, 쿠키 등 다양한 조건에 따라 처리됨
- 동작 과정
    - 유저 요청 → CDN 서버 확인 → 캐시가 있으면 바로 제공 → 없으면 원본 서버에서 가져와 캐싱 후 전달

#### VPC

- Virtual Private Cloud
- 다른 사용자의 네트워크와 완전히 분리된 공간
- IP 주소 대역, 서브넷, 라우팅 테이블, 게이트웨이 등을 직접 설정
- 방화벽 규칙(Security Group, NACL)을 사용해 외부에서 접근할 수 있는 범위를 제한할 수 있음
- 필요에 따라 네트워크를 키우거나 줄일 수 있음
- 사용 이유
    - 보안 → 안보이게 VPC로 데이터베이스를 한번 감싸서 안전하게 만들어줌
    - 확장성
    - 유연한 네트워크 설계가 가능함


### 오늘의 회고
너무 많은 내용을 배워서 오늘 정리가 끝나진 않았다.